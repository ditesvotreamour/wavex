var QueryLoader={overlay:"",loadBar:"",preloader:"",items:new Array,doneStatus:0,doneNow:0,selectorPreload:"body",ieLoadFixTime:2e3,ieTimeout:"",init:function(){if("MSIE 6.0,6.0"==navigator.userAgent.match(/MSIE (\d+(?:\.\d+)+(?:b\d*)?)/))return!1;"body"==QueryLoader.selectorPreload?(QueryLoader.spawnLoader(),QueryLoader.getImages(QueryLoader.selectorPreload),QueryLoader.createPreloading()):$(document).ready(function(){QueryLoader.spawnLoader(),QueryLoader.getImages(QueryLoader.selectorPreload),QueryLoader.createPreloading()}),QueryLoader.ieTimeout=setTimeout("QueryLoader.ieLoadFix()",QueryLoader.ieLoadFixTime)},ieLoadFix:function(){navigator.userAgent.match(/MSIE (\d+(?:\.\d+)+(?:b\d*)?)/)},imgCallback:function(){QueryLoader.doneNow++,QueryLoader.animateLoader()},getImages:function(e){$(e).find("*:not(script)").each(function(){e="";if("none"!=$(this).css("background-image"))var e=$(this).css("background-image");(e=(e=(e=(e=e.replace('url("',"")).replace("url(","")).replace('")',"")).replace(")","")).length>0&&QueryLoader.items.push(e)})},createPreloading:function(){QueryLoader.preloader=$("<div></div>").appendTo(QueryLoader.selectorPreload),jQuery(QueryLoader.preloader).css({height:"0px",width:"0px",overflow:"hidden"});var e=QueryLoader.items.length;QueryLoader.doneStatus=e;for(var r=0;r<e;r++){var o=$("<img></img>");jQuery(o).attr("src",QueryLoader.items[r]),jQuery(o).unbind("load"),jQuery(o).bind("load",function(){QueryLoader.imgCallback()}),jQuery(o).appendTo(jQuery(QueryLoader.preloader))}},spawnLoader:function(){if("body"==QueryLoader.selectorPreload)var e=$(window).height(),r=$(window).width(),o="fixed";else var e=$(QueryLoader.selectorPreload).outerHeight(),r=$(QueryLoader.selectorPreload).outerWidth(),o="absolute";var a=$(QueryLoader.selectorPreload).offset().left,d=$(QueryLoader.selectorPreload).offset().top;QueryLoader.overlay=$("<div></div>").appendTo($(QueryLoader.selectorPreload)),jQuery(QueryLoader.overlay).addClass("QOverlay"),jQuery(QueryLoader.overlay).css({position:o,top:d,left:a,width:r+"px",height:e+"px"}),QueryLoader.loadBar=$("<div></div>").appendTo($(QueryLoader.overlay)),jQuery(QueryLoader.loadBar).addClass("QLoader"),jQuery(QueryLoader.loadBar).css({position:"relative",top:"50%",width:"0%"})},animateLoader:function(){var e=100/QueryLoader.doneStatus*QueryLoader.doneNow;e>99?jQuery(QueryLoader.loadBar).stop().animate({width:e+"%"},500,"linear",function(){QueryLoader.doneLoad()}):jQuery(QueryLoader.loadBar).stop().animate({width:e+"%"},500,"linear",function(){})},doneLoad:function(){if(clearTimeout(QueryLoader.ieTimeout),"body"==QueryLoader.selectorPreload)e=jQuery(window).height();else var e=jQuery(QueryLoader.selectorPreload).outerHeight();jQuery(QueryLoader.loadBar).animate({height:e+"px",top:0},500,"linear",function(){jQuery(QueryLoader.overlay).fadeOut(800),jQuery(QueryLoader.preloader).remove()})}};